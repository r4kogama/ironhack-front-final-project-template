
# Vue / Supabase Todo-App 

A basic Vue Todo app that talks to a Supabase database.

The functionality should include:

* Authentication (sign up, sign in, sign out)
* Showing only the users own todos
* Ability to add new todos
* Ability to edit existing todos
* Ability to delete existing todos


## Tech Stack

**Client:** Vue.js (www.vuejs.com)

**Router:** Vue-router (https://router.vuejs.org/)

**Store:** Pinia (https://pinia.vuejs.org) and Pinia Persist for persistant log-in (https://seb-l.github.io/pinia-plugin-persist/)

**Server:** Supabase (www.supabase.io), Vite (dev server) (www.vitejs.dev)


## Project setup

Basic set up for Vue and Supabase

```bash
  yarn vite create "my-todo-project"
  cd my-todo-project
  yarn add @supabase/supabase-js
  yarn add pinia
  yarn add vue-router
  yarn add pinia-plugin-persist
```
    
## Vue.js

Modules needed: vue-router and pinia (for store)

We need a sign in / sign up splash page to display if we are not logged in

Sign Up should take email and password + password confirmation

Sign in should take email and password

After logging in it should show the main app

The todolist should fetch all current todos from the users todos in supabase


## Supabase / DB

### Setup:

To set up a database for our app, it will need a table that accepts the individual todos
This table needs several columns to store different data that each Todo item holds
This data includes the ID of each todo, which is a number starting at 0 with the first Todo item
There is also a User ID which is the UUID that is generated when registering
Then there is the task itself, it holds text (has to be longer than 3 characters)
After this we need a boolean value to decide if the task is complete or not
And finally inserted_at gives us the time the item was pushed into the database


After setting up the  basic table, we need to create some policies to make sure each user only gets
access to their own todos, and can only modify or delete their own todos.


```

create table todos (
  # This first part sets up the tables
  id bigint generated by default as identity primary key,
  user_id uuid references auth.users not null,
  task text check (char_length(task) > 3),
  is_complete boolean default false,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
  );
  alter table todos enable row level security;

  # Then it creates a policy that lets authenticated users create Todos
  create policy "Individuals can create todos." on todos for
  insert with check (auth.uid() = user_id);

  # Then it creates a policy that users can only view their own todos (select todos based on user id)
  create policy "Individuals can view their own todos. " on todos for
  select using (auth.uid() = user_id);

  # Then it does the same only for update
  create policy "Individuals can update their own todos." on todos for
  update using (auth.uid() = user_id);

  # And again for delete
  create policy "Individuals can delete their own todos." on todos for
  delete using (auth.uid() = user_id);

```


### API

Supabase will generate an API for this project automatically. Here are some relevant ones it has generated for this project:



```
# Authentication

# User Sign Up

let { user, error } = await supabase.auth.signUp({
  email: 'someone@email.com',
    password: 'qIZIlvypGCXkGkyItRrS'
    })

# User Sign In 

let { user, error } = await supabase.auth.signIn({
  email: 'someone@email.com',
    password: 'qIZIlvypGCXkGkyItRrS'
    })

# User Sign Out

let { error } = await supabase.auth.signOut()


# Interacting with the tasks table

# Select all todo items/rows

let { data: todos, error } = await supabase
  .from('todos')
    .select('*')

# Select/Read specific columns

let { data: todos, error } = await supabase
  .from('todos')
    .select('tasks, id')


```


### Useful resources

Though the docks for both Vue and supabase are great, it's always good to see some examples in the wild.
Here are some links that contain som relevant information and examples for this.
None of them are specifically a todo-app. But the concepts should still translate without to much difficulty.


* A solid step by step guide for authentication with Vue and Supabase: https://blog.logrocket.com/ultimate-guide-authentication-vue-js-supabase/

* How to set up a multi user blogging app with Vue/Nuxt and Supabase (there are some differences in approach here, but for the supabase parts, its still very relevant): https://css-tricks.com/using-nuxt-and-supabase-for-a-multi-user-blogging-app/ 

* As a bonus, if anyone wants to create user profiles on top of the regular auth-user, here is a good guide: https://dev.to/sruhleder/creating-user-profiles-on-sign-up-in-supabase-5037


